# ‚ùÑ Snowflakes ‚Äî SAM 2 Segmentation Demo

–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å–Ω–µ–∂–∏–Ω–æ–∫ —Å –ø–æ–º–æ—â—å—é Segment Anything Model 2 (SAM 2).

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1Ô∏è‚É£ –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

*   **[Git](https://git-scm.com/downloads)** (–¥–ª—è –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è)
*   **Python 3.10+** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 3.12)
*   **[Conda](https://docs.conda.io/projects/miniconda/en/latest/)** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è Miniconda)
*   **[Node.js](https://nodejs.org/) –∏ npm** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è LTS –≤–µ—Ä—Å–∏—è)
*   **CUDA Toolkit** (–µ—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å GPU –¥–ª—è SAM 2, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–µ—Ä—Å–∏—è —Å–æ–≤–º–µ—Å—Ç–∏–º–∞ —Å PyTorch)

### 2Ô∏è‚É£ –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

* git clone **https://github.com/katkoffff/snowflake.git** # –ó–∞–º–µ–Ω–∏ –Ω–∞ —Å–≤–æ–π URL, –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏—à—å
* cd snowflake

### 3Ô∏è‚É£ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –±—ç–∫–µ–Ω–¥

#### –°–æ–∑–¥–∞—ë–º –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º conda-–æ–∫—Ä—É–∂–µ–Ω–∏–µ:

* conda env create -f environment.yml
* conda activate snowflake

#### –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º PyTorch —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π CUDA 12.6 (–ø—Ä–æ–≤–µ—Ä—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π):

* pip install torch==2.6.0 torchvision==0.21.0 torchaudio==2.6.0 --index-url https://download.pytorch.org/whl/cu126

#### –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º SAM 2 –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:

* git clone https://github.com/facebookresearch/sam2.git
* cd sam2
* pip install -e .
* cd .. # –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞

#### –°–∫–∞—á–∏–≤–∞–µ–º –º–æ–¥–µ–ª—å SAM 2.1 (–Ω–∞–ø—Ä–∏–º–µ—Ä, Large):

* –°–∫–∞—á–∞–π—Ç–µ —á–µ–∫–ø–æ–∏–Ω—Ç **[sam2.1_hiera_large.pt](https://dl.fbaipublicfiles.com/segment_anything_2/092824/sam2.1_hiera_large.pt?spm=a2ty_o01.29997173.0.0.c33ac9217VgRfG&file=sam2.1_hiera_large.pt)** (–∏–ª–∏ –¥—Ä—É–≥–æ–π, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ–Ω—å—à—É—é –º–æ–¥–µ–ª—å).
* –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É backend/models, –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç: mkdir -p backend/models
* –ü–æ–ª–æ–∂–∏—Ç–µ —Ñ–∞–π–ª sam2.1_hiera_large.pt –≤ backend/models/.

### 4Ô∏è‚É£ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥

#### –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É frontend:

* cd frontend

#### –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

* npm install

#### –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞:

* cd ..

### 5Ô∏è‚É£ –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

#### –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–≤–æ–µ –æ–∫–Ω–æ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ (—Ç–µ—Ä–º–∏–Ω–∞–ª).

* –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É backend –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
* cd backend
* conda activate snowflake # –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –Ω—É–∂–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

#### –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±—ç–∫–µ–Ω–¥:

* uvicorn main:app --reload
* –ë—ç–∫–µ–Ω–¥ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É **http://localhost:8000**.

#### –û—Ç–∫—Ä–æ–π—Ç–µ –µ—â—ë –æ–¥–Ω–æ –Ω–æ–≤–æ–µ –æ–∫–Ω–æ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ (—Ç–µ—Ä–º–∏–Ω–∞–ª).

* –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É frontend:
* cd frontend

#### –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥:

* npm run dev
* –§—Ä–æ–Ω—Ç–µ–Ω–¥ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É **http://localhost:5173**.
* –û—Ç–∫—Ä–æ–π—Ç–µ **http://localhost:5173** –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

#### –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ 1 –∫–ª–∏–∫

* –ù–∞—Ö–æ–¥—è—Å—è –≤–Ω—É—Ç—Ä–∏ –ø—Ä–æ–µ–∫—Ç–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª **run_snowflake.bat** - –≤—Å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –≤ 1 –æ–∫–Ω–µ

### ‚ö†Ô∏è –í–∞–∂–Ω–æ

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã Python, Conda, Node.js, npm –∏ Git.
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ CUDA (–µ—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å GPU).
–£—Å—Ç–∞–Ω–æ–≤–∫–∞ SAM 2 –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ CUDA-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π. –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ, –ø–æ—Å—Ç-–æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–∞—Å–æ–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–∫–ª—é—á–µ–Ω–∞ (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ).
–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å WSL2 –Ω–∞ Windows –¥–ª—è –±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã.
–î–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–±–∞ —Å–µ—Ä–≤–µ—Ä–∞ (–±—ç–∫–µ–Ω–¥ –∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥) –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –æ–∫–Ω–∞—Ö –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏.

### üõ†Ô∏è –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Visual Studio Code .
–ü–æ–ª–µ–∑–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:
Python (–æ—Ç Microsoft)
ES7+ React/Redux/React-Native snippets
Tailwind CSS IntelliSense
Pylance (–¥–ª—è Python)
GitHub Copilot (–ø–æ –∂–µ–ª–∞–Ω–∏—é)
–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è VSCode –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ .vscode/ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞.