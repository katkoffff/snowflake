name: snowflake
channels:
  - defaults
  - pytorch # Добавим канал PyTorch, чтобы гарантировать установку нужных версий
  #- conda-forge # Иногда нужен для других зависимостей
dependencies:
  - python=3.12
  - pip
  - pip:
      # Основные зависимости для FastAPI и веба
      - fastapi==0.115.0
      - uvicorn==0.30.0
      - python-multipart==0.0.20 # Уточни версию, если нужна конкретная
      
      # Зависимости для обработки изображений
      - opencv-python==4.8.1.78
      - pillow==12.0.0 # Уточни версию, если нужна конкретная
      - numpy==1.26.4 # Уточни версию, если нужна конкретная
      - scikit-image==0.25.2 # Добавим, так как используешь skimage
      
      # PyTorch и его сателлиты (указаны версии для CUDA 12.6)
      # Убедись, что версии совместимы. В твоём pip list torch 2.6.0, torchvision 0.21.0
      # Эти версии нужно указать при установке вручную, pip install не может их установить из списка
      # Поэтому они НЕ указываются тут в pip:, а устанавливаются отдельно в инструкции.
      # - torch==2.6.0+cu126 # <-- НЕТ в pip list, устанавливается отдельно
      # - torchvision==0.21.0+cu126 # <-- НЕТ в pip list, устанавливается отдельно
      # - torchaudio==2.6.0+cu126 # <-- НЕТ в pip list, устанавливается отдельно
      
      # Зависимости для SAM 2
      # SAM-2 устанавливается через pip install -e . из репозитория
      # Его нельзя указать просто как имя пакета в списке pip:, т.к. он не опубликован на PyPI
      # Поэтому он НЕ указывается тут, а устанавливается отдельно в инструкции.
      # - SAM-2==1.0 # <-- НЕТ, устанавливается отдельно
      
      # Прочие зависимости, которые могут быть нужны
      - pydantic==2.12.3 # Уточни версию, если нужна конкретная
      - annotated-types==0.7.0 # Может быть зависимостью pydantic
      - anyio==4.11.0 # Может быть зависимостью fastapi
      - click==8.3.0 # Может быть зависимостью uvicorn
      - h11==0.16.0 # Может быть зависимостью uvicorn/starlette
      - idna==3.11 # Может быть зависимостью любого сетевого пакета
      - sniffio==1.3.1 # Может быть зависимостью anyio
      - starlette==0.38.6 # Зависимость FastAPI
      - typing_extensions==4.15.0 # Может быть зависимостью torch или других
      - tqdm==4.67.1 # Может быть зависимостью SAM 2 или torch
      - hydra-core==1.3.2 # Зависимость SAM 2
      - iopath==0.1.10 # Зависимость SAM 2
      - omegaconf==2.3.0 # Зависимость hydra-core
      - antlr4-python3-runtime==4.9.3 # Зависимость hydra-core
      - packaging==25.0 # Зависимость torch и других
      - filelock==3.20.0 # Зависимость torch
      - sympy==1.13.1 # Зависимость torch
      - networkx==3.5 # Зависимость torch
      - jinja2==3.1.6 # Зависимость torch
      - markupsafe==3.0.3 # Зависимость jinja2
      - portalocker==3.2.0 # Зависимость iopath
      - pywin32==311 # Зависимость portalocker на Windows
      - pyyaml==6.0.3 # Зависимость omegaconf
      - lazy_loader==0.4 # Зависимость scikit-image
      - imageio==2.37.0 # Зависимость scikit-image
      - tifffile==2025.10.16 # Зависимость scikit-image
      - mpmath==1.3.0 # Зависимость sympy
      - scipy==1.16.3 # Зависимость scikit-image
      # Зависимости от других зависимостей (не нужно указывать, pip сам разрулит, но для ясности)
      # - typing-inspection==0.4.2 # Скорее всего не нужна напрямую
      # - setuptools==80.9.0 # Обычно уже установлена
      # - wheel==0.45.1 # Обычно уже установлена
      # - intel-openmp==2021.4.0 # Зависимость от conda
      # - mkl==2021.4.0 # Зависимость от conda
      # - tbb==2021.13.1 # Зависимость от conda
      # - fsspec==2025.10.0 # Зависимость от torch